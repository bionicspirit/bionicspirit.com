<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">

  <link rel="canonical" href="https://alexn.org/blog/2017/11/10/minitest-no-crap-scala-library.html">
  <link rel="alternate" href="/atom.xml" title="Atom feed" type="application/atom+xml">

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@alexelcu" />

    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2017-11-10" />
    
    <meta property="article:tag" content="Code" />
    <meta property="article:tag" content="Testing" />
    <meta property="article:tag" content="Scala" />

    <title>Minitest: Zero Crap Scala Testing Library</title>
    <meta name="og:title" content="Minitest: Zero Crap Scala Testing Library" />
    <meta name="twitter:title" content="Minitest: Zero Crap Scala Testing Library" />

      <meta name="og:image" content="https://alexn.org/assets/img/2017/scala-icon.png" />
      <meta name="og:image:secure_url" content="https://alexn.org/assets/img/2017/scala-icon.png" />
      <meta name="twitter:image" content="https://alexn.org/assets/img/2017/scala-icon.png" />

      <meta name="og:description" content="Provides only the minimal functionality needed, with ScalaCheck integration and maximum compatibility." />
      <meta name="twitter:description" content="Provides only the minimal functionality needed, with ScalaCheck integration and maximum compatibility." />
      <meta name="description" content="Provides only the minimal functionality needed, with ScalaCheck integration and maximum compatibility." />

  <link href="/assets/css/fonts-8b37e535.css" rel="stylesheet" />
  <link href="/assets/css/all-b9d1ad87.css" rel="stylesheet" />
  <!--[if lt IE 9]>
  <link href="/assets/css/ie-hacks-0c76b2ed.css" rel="stylesheet" />
  <![endif]-->

  <!-- Google authorship -->
  <link href="https://plus.google.com/+alexelcu" rel="publisher">
</head>
<body>
  <div id="header-container">
    <header>
      <h1 id="title">alexn.org</h1>

      <meta itemprop="lastReviewed" content="2018-05-24"/>
      <div itemprop="reviewedBy" itemscope itemtype="https://schema.org/Person">
        <meta itemprop="name" content="Alexandru Nedelcu">
        <meta itemprop="url" content="https://plus.google.com/+alexelcu">
      </div>

      <div class="github-fork-ribbon-wrapper right">
        <div class="github-fork-ribbon">
          <a href="https://github.com/alexandru" itemprop="relatedLink">Fork me on GitHub</a>
        </div>
      </div>

      <nav>
    	  <a href="/">alexn.org</a>
    	  <a class="extra" href="/about.html" itemprop="significantLink">About</a>
      </nav>
    </header>
  </div>

  <div id="main-container">
    <div id="main">
      <article id="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <h1 itemprop="headline">Minitest: Zero Crap Scala Testing Library</h1>

    <div id="meta">
      <meta itemscope itemprop="mainEntityOfPage"  itemType="https://schema.org/WebPage" itemid="https://alexn.org/blog/2017/11/10/minitest-no-crap-scala-library.html"/>
      <meta itemprop="datePublished" content="2017-11-10"/>
      <meta itemprop="dateModified" content="2017-11-10"/>

      <time class="post-date" itemprop="dateCreated" datetime="2017-11-10">
        Nov 10, 2017
      </time>

      <span class="twitter-link">
        • <a href="https://twitter.com/alexelcu">@alexelcu</a>
      </span>

        <div itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
          <meta itemprop="url" content="https://alexn.org/assets/img/2017/scala-icon.png">
          <meta itemprop="width" content="680">
          <meta itemprop="height" content="680">
        </div>

      <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <meta itemprop="name" content="Alexandru Nedelcu">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
          <meta itemprop="url" content="https://alexn.org/assets/img/alex-big-version-72ppi.jpg">
          <meta itemprop="width" content="585">
          <meta itemprop="height" content="585">
        </div>
      </div>
    </div>
  </header>

  <div id="content" itemprop="articleBody">
    <p><img src="/assets/img/2017/scala-icon.png" class="right" width="200" alt="Scala icon" /></p>

<p><a href="https://github.com/monix/minitest">Minitest</a> is my minimal testing library 
that I've been using for developing <a href="https://monix.io">Monix</a>.</p>

<h2 id="raison-dêtre">Raison d'être</h2>

<p>I dislike most testing frameworks, because of bloat and of heavy DSLs
trying to mimic the English language. When I created Minitest, I
wasn't satisfied with any of the available alternatives.</p>

<p>Then I found that <a href="http://www.scala-sbt.org/">SBT</a> can do all the
heavy lifting (e.g. running the tests, reporting, etc), exposing a
nice <a href="https://github.com/sbt/test-interface">sbt/test-interface</a> that
you can integrate with. All you need to do is to build your own
API on top. And so I did.</p>

<p class="extra-info">
<strong>NOTE:</strong> My opinions in this article disagree with the design 
choices of popular testing libraries. I know that libraries like
<a href="http://www.scalatest.org/">ScalaTest</a> or 
<a href="https://etorreborre.github.io/specs2/">Specs2</a> are the way they
are because people want them that way. And those are awesome
projects, having awesome authors. They are just not for me.
</p>

<h3 id="portability">Portability</h3>

<p>The natural tendency of testing frameworks is to grow beyond all
imagination in order to accommodate the various testing styles that
people want, these testing frameworks also end up hard to port to new
platforms - which is especially relevant in Scala due to new major
versions and new targets released all the time
(e.g. <a href="http://www.scala-js.org/">Scala.js</a>, <a href="https://github.com/scala-native/scala-native">Scala
Native</a>,
<a href="https://github.com/lampepfl/dotty">Dotty</a>).</p>

<p>In 2014 I started to work on <a href="https://monix.io">Monix</a> and during that
time <a href="http://www.scala-js.org/">Scala.js</a> was also born.</p>

<p>This awesome Scala compiler that targets JavaScript was really fresh
back then and I wanted to target it, however none of the testing
libraries (e.g. <a href="http://www.scalatest.org/">ScalaTest</a>) were
supporting it yet, except for
<a href="https://github.com/lihaoyi/utest">µTest</a>. µTest seemed fine, but it
had problems when displaying error messages, plus its DSL was and
still is weird.</p>

<p>For some reason I don't like magic in my tests — and by magic I mean
expressions or statements that I don't immediately understand. That,
and I wanted an easy transition in Monix from ScalaTest's
<a href="http://www.scalatest.org/getting_started_with_fun_suite">FunSuite</a>,
which is what I was using.</p>

<h3 id="say-no-to-dsls">Say No to DSLs</h3>

<p>I do not want to write <code class="highlighter-rouge">x shouldBe greaterThan(y)</code> or other such
nonsense. I do not have the memory for that, I always forget the API
and the IDE doesn't help much due to the implicit conversions going on.</p>

<p>Unit tests might be business driven, but so is software in
general, nothing makes tests a special snowflake to warrant the abuse
of the programming language to make it look like English.</p>

<p>Yes, there are advantages to such a DSL. For example if you express
the above with a simple <code class="highlighter-rouge">assert</code>, then you won't get a meaningful
error message back, depending on whether the implementation does or
doesn't do macros for <code class="highlighter-rouge">assert</code>, but if it does, then that's a whole
other can of worms:</p>

<div class="highlight"><pre class="highlight scala"><code><span class="n">assert</span><span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="o">)</span>
</code></pre></div>
<p><strong>Fact:</strong> most assertions that you need to do in testing are <em>equality
tests</em> and for that rare moment in which you need inequality tests, you
can simply add a custom error message:</p>

<div class="highlight"><pre class="highlight scala"><code><span class="n">assert</span><span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="o">,</span> <span class="n">s</span><span class="s">"$x &gt; $y"</span><span class="o">)</span>
</code></pre></div>
<p>Yes, it's repetitive, but I don't care, because this is such a rare
event that I don't want to optimize it with a special DSL or even with
macros.</p>

<p>Another thing that I absolutely hate are tests marked with English
words like "<code class="highlighter-rouge">it</code>", forcing you to phrase the test's description in a
certain way. I frequently end up with "sentences" that makes no sense:</p>

<div class="highlight"><pre class="highlight scala"><code><span class="n">it</span><span class="o">(</span><span class="s">"left identity"</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// ...
</span><span class="o">}</span>
</code></pre></div>
<p>This tendency actually stems from Java OOP, with its "kingdom of
nouns", the idea being that the things you're testing are all nouns
that interact with the world, aka objects. Well, I'm not testing just
objects, so <code class="highlighter-rouge">it</code> is a bad trend.</p>

<p>And the idea that business folks might be writing tests, hell no, that
almost never happens and if they are inclined to do that (like once in
a million), then they can just learn programming. It's not like an
English-like DSL is any closer to natural language.</p>

<h3 id="minimal-implementation-less-is-more">Minimal Implementation, Less is More</h3>

<p>Because the implementation is minimal, there's nothing that I can't
fix in it, there's nothing that I can't implement should I need
anything.</p>

<p>It's also easy to port to new targets. I intend to port it to 
<a href="https://github.com/scala-native/scala-native">Scala Native</a> as soon as it
is available for Scala 2.12 (at the moment of writing, it isn't).</p>

<p>In fact, if you want to build your own testing framework, Minitest can
serve as a sample ;-)</p>

<h2 id="hypothesis">Hypothesis</h2>

<p>All you need is the ability to express:</p>

<ol>
  <li>synchronous tests, returning <code class="highlighter-rouge">Unit</code> (or an equivalent, as I ended
up doing in order to avoid Scala's annoying implicit conversion)</li>
  <li>asynchronous tests, returning <code class="highlighter-rouge">Future</code></li>
  <li>the ability to setup an environment before every test, then
tear it down after each test</li>
</ol>

<p>All the asserts that you need:</p>

<ol>
  <li><code class="highlighter-rouge">assert(boolean, string?)</code>: general purpose assertion for any
condition</li>
  <li><code class="highlighter-rouge">assertEquals(received, expected)</code>: for equality testing with a
nice error message</li>
  <li><code class="highlighter-rouge">intercept</code>: for testing that exceptions are thrown</li>
  <li><code class="highlighter-rouge">fail(reason?)</code>: fails the current test</li>
  <li><code class="highlighter-rouge">ignore(reason?)</code>: ignores the current test</li>
  <li><code class="highlighter-rouge">cancel(reason?)</code>: cancels the current test</li>
</ol>

<p>What you don't need:</p>

<ol>
  <li>nesting in tests</li>
  <li>an English-like DSL</li>
  <li>a purely functional <em>base</em> API</li>
</ol>

<h2 id="tutorial">Tutorial</h2>

<p>Test suites MUST BE objects, not classes. To create a simple test
suite, it could inherit from <code class="highlighter-rouge">SimpleTestSuite</code>. Here's a simple test:</p>

<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">minitest.SimpleTestSuite</span>

<span class="k">object</span> <span class="nc">MySimpleSuite</span> <span class="k">extends</span> <span class="nc">SimpleTestSuite</span> <span class="o">{</span>
  <span class="n">test</span><span class="o">(</span><span class="s">"should be"</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="n">test</span><span class="o">(</span><span class="s">"should not be"</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assert</span><span class="o">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">3</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="n">test</span><span class="o">(</span><span class="s">"should throw"</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">class</span> <span class="nc">DummyException</span> <span class="k">extends</span> <span class="nc">RuntimeException</span><span class="o">(</span><span class="s">"DUMMY"</span><span class="o">)</span>
    <span class="k">def</span> <span class="n">test</span><span class="o">()</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">DummyException</span>

    <span class="n">intercept</span><span class="o">[</span><span class="kt">DummyException</span><span class="o">]</span> <span class="o">{</span>
      <span class="n">test</span><span class="o">()</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="n">test</span><span class="o">(</span><span class="s">"test result of"</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">assertResult</span><span class="o">(</span><span class="s">"hello world"</span><span class="o">)</span> <span class="o">{</span>
      <span class="s">"hello"</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="s">"world"</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="n">test</span><span class="o">(</span><span class="s">"should be ignored"</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="nc">Platform</span><span class="o">.</span><span class="n">isJS</span><span class="o">)</span> <span class="n">ignore</span><span class="o">(</span><span class="s">"Blocking not supported on top of JS"</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">r</span> <span class="k">=</span> <span class="nc">Await</span><span class="o">.</span><span class="n">result</span><span class="o">(</span><span class="nc">Future</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="nc">Duration</span><span class="o">.</span><span class="nc">Inf</span><span class="o">)</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="n">r</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>In case you want to setup an environment for each test and need
<code class="highlighter-rouge">setup</code> and <code class="highlighter-rouge">tearDown</code> semantics, you could inherit from
<a href="https://github.com/monix/minitest/blob/v2.0.0/shared/src/main/scala/minitest/TestSuite.scala">TestSuite</a>. 
Then on each <code class="highlighter-rouge">test</code> definition, you'll receive a fresh value:</p>

<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">monix.execution.schedulers.TestScheduler</span>
<span class="k">import</span> <span class="nn">minitest.TestSuite</span>

<span class="k">object</span> <span class="nc">MyTestSuite</span> <span class="k">extends</span> <span class="nc">TestSuite</span><span class="o">[</span><span class="kt">TestScheduler</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">setup</span><span class="o">()</span> <span class="k">=</span> <span class="nc">TestScheduler</span><span class="o">()</span>

  <span class="k">def</span> <span class="n">tearDown</span><span class="o">(</span><span class="n">env</span><span class="k">:</span> <span class="kt">TestScheduler</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span>
    <span class="n">assert</span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">isEmpty</span><span class="o">,</span> <span class="s">"Scheduler should not have tasks left"</span><span class="o">)</span>

  <span class="n">test</span><span class="o">(</span><span class="s">"simulated async"</span><span class="o">)</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">ec</span> <span class="k">=&gt;</span>
    <span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="nc">Future</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="n">map</span><span class="o">(</span><span class="k">_</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
    <span class="n">ec</span><span class="o">.</span><span class="n">tick</span><span class="o">()</span>
	
    <span class="n">assertEquals</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="n">value</span><span class="o">,</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Success</span><span class="o">(</span><span class="mi">2</span><span class="o">)))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Minitest supports asynchronous results in tests, just use <code class="highlighter-rouge">testAsync</code>
and return a <code class="highlighter-rouge">Future[Unit]</code>:</p>

<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">scala.concurrent.ExecutionContext.Implicits.global</span>

<span class="k">object</span> <span class="nc">MySimpleSuite</span> <span class="k">extends</span> <span class="nc">SimpleTestSuite</span> <span class="o">{</span>
  <span class="n">testAsync</span><span class="o">(</span><span class="s">"asynchronous execution"</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">future</span> <span class="k">=</span> <span class="nc">Future</span><span class="o">(</span><span class="mi">100</span><span class="o">).</span><span class="n">map</span><span class="o">(</span><span class="k">_</span><span class="o">+</span><span class="mi">1</span><span class="o">)</span>
    
    <span class="k">for</span> <span class="o">(</span><span class="n">result</span> <span class="k">&lt;-</span> <span class="n">future</span><span class="o">)</span> <span class="k">yield</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="n">result</span><span class="o">,</span> <span class="mi">101</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Minitest has integration with
<a href="https://www.scalacheck.org/">ScalaCheck</a>. 
So for property-based testing:</p>

<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">minitest.laws.Checkers</span>

<span class="k">object</span> <span class="nc">MyLawsTest</span> <span class="k">extends</span> <span class="nc">SimpleTestSuite</span> <span class="k">with</span> <span class="nc">Checkers</span> <span class="o">{</span>
  <span class="n">test</span><span class="o">(</span><span class="s">"addition of integers is commutative"</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">check2</span><span class="o">((</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">==</span> <span class="n">y</span> <span class="o">+</span> <span class="n">x</span><span class="o">)</span>
  <span class="o">}</span>
  
  <span class="n">test</span><span class="o">(</span><span class="s">"addition of integers is transitive"</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">check3</span><span class="o">((</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">z</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span> <span class="o">+</span> <span class="n">z</span> <span class="o">==</span> <span class="n">x</span> <span class="o">+</span> <span class="o">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">z</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>That's everything!</p>

<h2 id="common-complaints">Common Complaints</h2>

<h3 id="i-do-not-like-future">I do not like Future</h3>

<p>That's too bad, because the <code class="highlighter-rouge">Future</code> is needed by the runtime and
regardless what alternative you use (e.g. <code class="highlighter-rouge">cats.effect.IO</code>,
<code class="highlighter-rouge">monix.eval.Task</code>), you'll have to convert it into a <code class="highlighter-rouge">Future</code> anyway.</p>

<p>Besides, a good testing framework cannot have dependencies, because it
would end in conflict with the project's dependencies. It's unwise to
depend on Cats or Scalaz.</p>

<p>And you can always build your own <code class="highlighter-rouge">testTask</code>, <code class="highlighter-rouge">testEffect</code> or <code class="highlighter-rouge">testIO</code>
utilities on top of <code class="highlighter-rouge">testAsync</code>.</p>

<h3 id="i-want-a-purely-functional-api">I want a purely functional API</h3>

<p><a href="https://etorreborre.github.io/specs2/">Specs2</a> has a nice functional
API. You might like that, however I don't like it for all the reasons
stated above.</p>

<p>And if pure FP is what you want, nothing stops you from implementing
your own utilities and I recommend piggybacking on ScalaCheck, e.g:</p>

<div class="highlight"><pre class="highlight scala"><code><span class="k">import</span> <span class="nn">cats.effect.IO</span>
<span class="k">import</span> <span class="nn">org.scalacheck.</span><span class="o">{</span><span class="nc">Prop</span><span class="o">,</span> <span class="nc">Test</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">scala.concurrent.ExecutionContext.Implicits.global</span>

<span class="k">trait</span> <span class="nc">PureTestSuite</span> <span class="k">extends</span> <span class="n">minitest</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="nc">AbstractTestSuite</span> <span class="o">{</span>
  <span class="k">private</span><span class="o">[</span><span class="kt">this</span><span class="o">]</span> <span class="k">val</span> <span class="n">ts</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SimpleTestSuite</span> <span class="o">{}</span>
  <span class="k">lazy</span> <span class="k">val</span> <span class="n">properties</span> <span class="k">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">properties</span>
  
  <span class="k">def</span> <span class="n">test</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)(</span><span class="n">f</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">Prop</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> 
    <span class="n">ts</span><span class="o">.</span><span class="n">test</span><span class="o">(</span><span class="n">name</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Test</span><span class="o">.</span><span class="n">check</span><span class="o">(</span><span class="n">config</span><span class="o">,</span> <span class="n">f</span><span class="o">)</span>
      <span class="k">if</span> <span class="o">(!</span><span class="n">result</span><span class="o">.</span><span class="n">passed</span><span class="o">)</span> <span class="n">fail</span><span class="o">(</span><span class="nc">Pretty</span><span class="o">.</span><span class="n">pretty</span><span class="o">(</span><span class="n">result</span><span class="o">))</span>
    <span class="o">}</span>

  <span class="k">def</span> <span class="n">testIO</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)(</span><span class="n">f</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="nc">IO</span><span class="o">[</span><span class="kt">Prop</span><span class="o">])</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> 
    <span class="n">ts</span><span class="o">.</span><span class="n">testAsync</span><span class="o">(</span><span class="n">name</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">f</span><span class="o">.</span><span class="n">unsafeToFuture</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">result</span> <span class="k">=&gt;</span>
        <span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">Test</span><span class="o">.</span><span class="n">check</span><span class="o">(</span><span class="n">config</span><span class="o">,</span> <span class="n">f</span><span class="o">)</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">result</span><span class="o">.</span><span class="n">passed</span><span class="o">)</span> <span class="n">fail</span><span class="o">(</span><span class="nc">Pretty</span><span class="o">.</span><span class="n">pretty</span><span class="o">(</span><span class="n">result</span><span class="o">))</span>
      <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>There's your purely functional API in just a couple of lines of code.</p>

<p>I don't want that in Monix though - the integration that we have with
ScalaCheck is minimal and enough.</p>

<h3 id="it-does-not-support-maven-cbt-or-others">It does not support Maven, CBT or others</h3>

<p>Sorry about that, but this library is meant to be minimal and stable,
and I don't have the time to expand support beyond SBT right now.</p>

<p>Pull requests open and only accepted if they don't complicate the
codebase much.</p>

<h2 id="final-words">Final Words</h2>

<p>Forget DSLs.</p>

<p>All you need for testing are
<a href="https://github.com/monix/minitest/">Minitest</a> and
<a href="https://www.scalacheck.org/">ScalaCheck</a>.</p>


    <div class="authorship" itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alexandru Nedelcu">
      Written by <a href="https://alexn.org/about.html" itemprop="url" rel="author">
        Alexandru Nedelcu</a> |
      <a href="https://twitter.com/alexelcu" itemprop="url" rel="author">
        Twitter</a> |
      <a href="https://github.com/alexandru" itemprop="url" rel="author">
        GitHub</a>
    </div>
  </div>

  <footer>
    <div id="other-articles">
      <h2>Recent Articles</h2>

      <ul class="posts">
      	<li>
      	  <time datetime="2018-05-06">
      	    2018-05-06 &raquo;
      	  </time>
      	  <a href="/blog/2018/05/06/bifunctor-io.html" rel="prefetch related">On Bifunctor IO and Java's Checked Exceptions</a>
      	</li>
      	<li>
      	  <time datetime="2018-02-12">
      	    2018-02-12 &raquo;
      	  </time>
      	  <a href="/blog/2018/02/12/in-defense-oofp.html" rel="prefetch related">In Defense of OOFP</a>
      	</li>
      	<li>
      	  <time datetime="2017-10-15">
      	    2017-10-15 &raquo;
      	  </time>
      	  <a href="/blog/2017/10/15/functional-programming.html" rel="prefetch related">What is Functional Programming?</a>
      	</li>
      	<li>
      	  <time datetime="2017-10-13">
      	    2017-10-13 &raquo;
      	  </time>
      	  <a href="/blog/2017/10/13/scaladays-copenhagen.html" rel="prefetch related">Scala Days 2017 — Monix Task</a>
      	</li>
      	<li>
      	  <time datetime="2017-10-11">
      	    2017-10-11 &raquo;
      	  </time>
      	  <a href="/blog/2017/10/11/javascript-promise-leaks-memory.html" rel="prefetch related">JavaScript's Promise Leaks Memory</a>
      	</li>
      	<li>
      	  <time datetime="2017-08-16">
      	    2017-08-16 &raquo;
      	  </time>
      	  <a href="/blog/2017/08/16/automatic-releases-sbt-travis.html" rel="prefetch related">Automatic Releases to Maven Central with Travis and SBT</a>
      	</li>
      	<li>
      	  <time datetime="2017-03-15">
      	    2017-03-15 &raquo;
      	  </time>
      	  <a href="/blog/2017/03/15/fp-inception.html" rel="prefetch related">Functional Programming Inception - Bucharest FP</a>
      	</li>
      </ul>
    </div>

    <div id="contributions">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'alexnorg';
        var disqus_url = 'http://alexn.org/blog/2017/11/10/minitest-no-crap-scala-library.html';

        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </footer>
</article>

    </div>
  </div>

  <div id="footer-container">
    <footer>
      <div class="contact">
      	&copy; 2018 Alexandru Nedelcu
      	<br>
      	Some rights reserved (<a href="http://creativecommons.org/licenses/by-nc/3.0/" rel="license">CC BY-NC 3.0</a>)
      </div>

      <div class="rss">
      	<a href="https://twitter.com/alexelcu" target="_blank" title="Follow me on Twitter (@alexelcu)">
      	  <img src="/assets/img/twitter-logo.png" width="60" height="60" alt="Follow me on Twitter (@alexelcu)" />
      	</a>
      </div>
    </footer>
  </div>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-84530423-1', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
  </script>
</body>
</html>
